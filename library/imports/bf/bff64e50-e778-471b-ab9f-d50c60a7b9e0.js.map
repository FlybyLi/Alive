{"version":3,"sources":["../../../../../../assets/script/game/bullet/assets/script/game/bullet/bulletBase.ts"],"names":[],"mappings":";;;;;AAEM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAA;AAGzC;IAAgC,8BAAY;IAD5C;QAAA,qEA6DC;QA1DG,WAAW;QACX,aAAO,GAAY,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;QACpC,WAAW;QACX,eAAS,GAAW,CAAC,CAAA;QACrB,SAAS;QACT,SAAG,GAA2B,SAAS,CAAA;QACvC,WAAW;QACX,mBAAa,GAA8B,SAAS,CAAA;;IAmDxD,CAAC;IAjDG,mBAAmB;IACnB,0BAAK,GAAL,UAAO,aAA4B,EAAE,GAAY,EAAE,KAAa,EAAE,GAAe;QAC7E,IAAI,CAAC,aAAa,GAAG,aAAa,CAAA;QAClC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;QAChB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAA;QACpB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;IACpB,CAAC;IAED,0BAAK,GAAL;QACI,mBAAmB;IACvB,CAAC;IAED,cAAc;IACd,qCAAgB,GAAhB,UAAkB,KAAkB,EAAE,IAAiB;QACnD,iBAAiB;IACrB,CAAC;IAED,6BAAQ,GAAR,UAAU,KAAa;QACnB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;IAC1B,CAAC;IAED,2BAAM,GAAN,UAAQ,GAAY;QAChB,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAA;QACtB,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAA;IAC1B,CAAC;IAED,2BAAM,GAAN,UAAQ,GAAe;QACnB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAA;IAClB,CAAC;IAED,2BAAM,GAAN;QACI,OAAO,IAAI,CAAC,GAAG,CAAA;IACnB,CAAC;IAED,2BAAM,GAAN,UAAQ,EAAU;QACd,IAAI,IAAI,CAAC,SAAS,KAAK,CAAC;YAAE,OAAM;QAChC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,EAAE;YACtB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,GAAG,EAAE,CAAA;SACtD;QACD,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,EAAE;YACtB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,GAAG,EAAE,CAAA;SACtD;QACD,WAAW;QACX,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE;YAC5D,mBAAmB;YACnB,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;SAC/D;IACL,CAAC;IA1DQ,UAAU;QADtB,OAAO;OACK,UAAU,CA4DtB;IAAD,iBAAC;CA5DD,AA4DC,CA5D+B,EAAE,CAAC,SAAS,GA4D3C;AA5DY,gCAAU","file":"","sourceRoot":"../../../../../../assets/script/game/bullet","sourcesContent":["import BulletFactory, { BulletType } from \"../bullet/bulletFactory\"\n\nconst {ccclass, property} = cc._decorator\n\n@ccclass\nexport class BulletBase extends cc.Component {\n\n    /** 移动方向 */\n    moveDir: cc.Vec2 = new cc.Vec2(0, 0)\n    /** 移动速度 */\n    moveSpeed: number = 0\n    /** 标签 */\n    tag: BulletType | undefined = undefined\n    /** 子弹工厂 */\n    bulletFactory: BulletFactory | undefined = undefined\n\n    /** 从节点池取出时初始化属性 */\n    reuse (bulletFactory: BulletFactory, dir: cc.Vec2, speed: number, tag: BulletType): void {\n        this.bulletFactory = bulletFactory\n        this.setDir(dir)\n        this.setSpeed(speed)\n        this.setTag(tag)\n    }\n\n    unuse (): void {\n        // Util.log('回收成功')\n    }\n\n    /** 碰撞后回收子弹 */\n    onCollisionEnter (other: cc.Collider, self: cc.Collider): void {\n        // Util.log('碰撞')\n    }\n\n    setSpeed (speed: number): void {\n        this.moveSpeed = speed\n    }\n\n    setDir (dir: cc.Vec2): void {\n        this.moveDir.x = dir.x\n        this.moveDir.y = dir.y\n    }\n\n    setTag (tag: BulletType): void {\n        this.tag = tag\n    }\n\n    getTag (): BulletType {\n        return this.tag\n    }\n\n    update (dt: number): void {\n        if (this.moveSpeed === 0) return\n        if (this.moveDir.x !== 0) {\n            this.node.x += this.moveDir.x * this.moveSpeed * dt\n        }\n        if (this.moveDir.y !== 0) {\n            this.node.y += this.moveDir.y * this.moveSpeed * dt\n        }\n        /** 边界回收 */\n        if (Math.abs(this.node.x) > 360 || Math.abs(this.node.y) > 640) {\n            // Util.log('边界回收')\n            this.bulletFactory.bulletPools[this.getTag()].put(this.node)\n        }\n    }\n\n}\n"]}